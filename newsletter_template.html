<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>üé¨ Ahmed's ET Newsletter</title>
  <style>
    body { 
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background-color: #764ba2; /* Fallback for linear-gradient */
      color: #333; 
      padding: 20px; 
      margin: 0;
      line-height: 1.6;
    }
    
    .container {
      max-width: 800px;
      margin: 0 auto;
      background: #fff;
      border-radius: 15px;
      overflow: hidden;
      box-shadow: 0 10px 30px rgba(0,0,0,0.2);
    }
    
    .header {
      background-color: #ff6b6b; /* Fallback for linear-gradient */
      color: white;
      text-align: center;
      padding: 30px 20px;
      position: relative;
    }
    
    .header::before {
      content: 'üé¨';
      font-size: 3em;
      position: absolute;
      top: 10px;
      left: 20px;
      opacity: 0.3;
    }
    
    .header h1 {
      margin: 0;
      font-size: 2.5em;
      font-weight: 300;
      text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
    }
    
    .header .subtitle {
      font-size: 1.1em;
      opacity: 0.9;
      margin-top: 5px;
    }
    
    .section-header {
      background-color: #2c3e50; /* Fallback for linear-gradient */
      color: white;
      padding: 15px 25px;
      margin: 0;
      font-size: 1.8em;
      font-weight: 600;
      position: relative;
      overflow: hidden;
    }
    
    .section-header.movies::before { content: 'üé≠ '; }
    .section-header.tv::before { content: 'üì∫ '; }
    
    .content-area {
      padding: 20px;
      background: #fafafa;
    }
    
    .movie, .show { 
      background: #fff; 
      border-radius: 12px; 
      box-shadow: 0 4px 15px rgba(0,0,0,0.1); 
      margin-bottom: 25px; 
      overflow: hidden;
      border-left: 4px solid #ff6b6b;
    }
    
    .show {
      border-left-color: #4ecdc4;
    }

    .poster-cell {
      background-color: #c3cfe2; /* Fallback for linear-gradient */
      padding: 15px;
      text-align: center;
    }
    
    .poster-cell {
      width: 200px; /* Control width via CSS */
      vertical-align: middle; /* Center poster vertically */
    }
    
    .poster-cell img {
      border-radius: 8px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.2);
    }
    
    .details-cell {
      padding: 20px 25px;
      background: #fff;
      vertical-align: top; /* Keep details aligned to top */
    }
    
    .title {
      font-size: 1.6em;
      font-weight: 700;
      margin: 0 0 15px 0;
      color: #2c3e50;
      border-bottom: 2px solid #ecf0f1;
      padding-bottom: 8px;
    }
    
    .info-row {
      margin-bottom: 12px; /* This div is now primarily for margin */
    }

    
    .info-label {
      font-weight: 600;
      color: #34495e;
      min-width: 100px; /* Ensures label text area is at least 100px */
      display: inline-block; /* Changed from inline-flex */
      vertical-align: top; /* Align label to top */
      /* margin-right: 10px; Removed, spacing handled by parent td's padding */
    }
    
    .info-label::before {
      margin-right: 6px;
      font-size: 1.1em;
    }

    .info-content {
      display: inline-block;
      /* width: calc(100% - 120px); REMOVED - Handled by table cell */
      color: #555;
      vertical-align: top; /* Align content to top */
    }
    
    .overview-text {
      font-style: italic;
      color: #666;
      line-height: 1.5;
      display: block; /* Ensure overview text takes full width */
    }
    
    
    .score-badge {
      display: inline-block; /* Changed from inline-flex */
      vertical-align: middle; /* Align badges vertically */
      background-color: #764ba2; /* Fallback for linear-gradient */
      color: white;
      padding: 6px 12px;
      border-radius: 20px;
      font-size: 0.9em;
      font-weight: 600;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }

    
    .score-badge.metacritic {
      background-color: #ffb347; /* Fallback */
    }
    
    .score-badge.rt-critic {
      background-color: #ff4757; /* Fallback */
    }
    
    .score-badge.rt-audience {
      background-color: #26de81; /* Fallback */
    }

    .score-badge::before {
      margin-right: 5px;
      font-size: 1.1em;
    }
    
    
    .release-date {
      background: #ecf0f1;
      padding: 4px 10px;
      border-radius: 15px;
      font-size: 0.9em;
      color: #2c3e50;
      font-weight: 600;
    }
    
    a {
      color: inherit;
      text-decoration: none;
    }
    
    .footer {
      background: #2c3e50;
      color: white;
      text-align: center;
      padding: 20px;
      font-size: 0.9em;
    }
    
    @media (max-width: 600px) {
      /* Make table cells in info-row stack */
      .info-table .info-label-cell,
      .info-table .info-content-cell {
        display: block !important;
        width: 100% !important;
        padding-right: 0 !important; /* Reset padding */
        box-sizing: border-box;
      }
      
      .info-label {
        /* display: block; /* Not strictly needed as parent td is block */
        margin-bottom: 5px;
        min-width: 0; /* Allow label to shrink if necessary on small screens */
      }

      .poster-cell, 
      .details-cell {
        display: block;
        width: 100%; 
        box-sizing: border-box;
      }

      .poster-cell {
        text-align: center; /* Center the image */
        padding-bottom: 0; /* Adjust spacing when stacked */
      }
      
      .details-cell {
        padding-top: 15px; /* Add space above details when stacked */
        text-align: left; /* Ensure text is left-aligned */
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <!-- Header -->
    <div class="header">
      <h1>The Final Cut</h1>
      <div class="subtitle">Curated by Ahmed Omar</div>
    </div>
    
    <h2 class="section-header movies">üé¨ Featured Movies</h2>
    <div class="content-area">
      {% for movie in movies %}
      <table class="movie" cellpadding="0" cellspacing="0" width="100%">
        <!-- Main movie item row -->
        <tr>
          <td class="poster-cell">
            <a href="{{ movie.imdb_url }}">
              <img src="https://image.tmdb.org/t/p/w300{{ movie.poster_path }}" 
                   alt="{{ movie.title }} Poster" width="150">
            </a>
          </td>
          <td class="details-cell">
            <h3 class="title">{{ movie.title }}</h3>

            <div class="info-row">
              <table class="info-table" width="100%" cellpadding="0" cellspacing="0" border="0"><tr><td class="info-label-cell" width="110" style="width: 110px; vertical-align: top; padding-right: 10px;"><span class="info-label genres">üé≠ Genres:</span></td><td class="info-content-cell" style="vertical-align: top;"><span class="info-content">{{ movie.genres | join(', ') | default('N/A') }}</span></td></tr></table>
            </div>
            
            <div class="info-row">
              <table class="info-table" width="100%" cellpadding="0" cellspacing="0" border="0"><tr><td class="info-label-cell" width="110" style="width: 110px; vertical-align: top; padding-right: 10px;"><span class="info-label overview">üìù Plot:</span></td><td class="info-content-cell" style="vertical-align: top;"><span class="info-content overview-text">{{ movie.overview }}</span></td></tr></table>
            </div>
            
            <div class="info-row">
              <table class="info-table" width="100%" cellpadding="0" cellspacing="0" border="0"><tr><td class="info-label-cell" width="110" style="width: 110px; vertical-align: top; padding-right: 10px;"><span class="info-label cast">üë• Cast:</span></td><td class="info-content-cell" style="vertical-align: top;"><span class="info-content">{{ movie.cast | join(', ') | default('N/A') }}</span></td></tr></table>
            </div>
            
            <div class="info-row">
              <table class="info-table" width="100%" cellpadding="0" cellspacing="0" border="0"><tr><td class="info-label-cell" width="110" style="width: 110px; vertical-align: top; padding-right: 10px;"><span class="info-label director">üé¨ Director:</span></td><td class="info-content-cell" style="vertical-align: top;"><span class="info-content">{{ movie.directors | join(', ') | default('N/A') }}</span></td></tr></table>
            </div>
            
            <div class="info-row">
              <table class="info-table" width="100%" cellpadding="0" cellspacing="0" border="0"><tr><td class="info-label-cell" width="110" style="width: 110px; vertical-align: top; padding-right: 10px;"><span class="info-label writer">‚úçÔ∏è Writers:</span></td><td class="info-content-cell" style="vertical-align: top;"><span class="info-content">{{ movie.writers | join(', ') | default('N/A') }}</span></td></tr></table>
            </div>
            
            <div class="info-row">
              <table class="info-table" width="100%" cellpadding="0" cellspacing="0" border="0">
                <tr>
                  <td class="info-label-cell" width="110" style="width: 110px; vertical-align: top; padding-right: 10px;">
                    <span class="info-label scores">‚≠ê Ratings:</span>
                  </td>
                  <td class="info-content-cell" style="vertical-align: top;">
                    <div class="scores-container">
                      {% if movie.metacritic_score %}
                      <span class="score-badge metacritic" title="Metacritic Score: Aggregated score from professional critics." style="margin-right: 10px; margin-bottom: 5px;">‚ìÇÔ∏è {{ movie.metacritic_score }}</span>
                      {% endif %}
                      {% if movie.rotten_tomatoes_scores.critic_score %}
                      <span class="score-badge rt-critic" title="Rotten Tomatoes Tomatometer: Percentage of positive critic reviews." style="margin-right: 10px; margin-bottom: 5px;">üçÖ {{ movie.rotten_tomatoes_scores.critic_score }}%</span>
                      {% endif %}
                      {% if movie.rotten_tomatoes_scores.audience_score %}
                      <span class="score-badge rt-audience" title="Rotten Tomatoes Audience Score: Percentage of positive user ratings;" style="margin-right: 10px; margin-bottom: 5px;">üçø {{ movie.rotten_tomatoes_scores.audience_score }}%</span>
                      {% endif %}
                    </div>
                  </td>
                </tr>
              </table>
            </div>
            
            <div class="info-row">
              <table class="info-table" width="100%" cellpadding="0" cellspacing="0" border="0">
                <tr>
                  <td class="info-label-cell" width="110" style="width: 110px; vertical-align: top; padding-right: 10px;">
                    <span class="info-label release">Release:</span>
                  </td>
                  <td class="info-content-cell" style="vertical-align: top;">
                    <span class="release-date">{{ movie.release_date }}</span>
                  </td>
                </tr>
              </table>
            </div>
          </td>
        </tr>
      </table>
      {% endfor %}
    </div>
    
    <h2 class="section-header tv">Featured TV Shows</h2>
    <div class="content-area">
      {% for show in shows %}
      <table class="show" cellpadding="0" cellspacing="0" width="100%">
        <!-- Main show item row -->
        <tr>
          <td class="poster-cell">
            <a href="{{ show.imdb_url }}">
              <img src="https://image.tmdb.org/t/p/w300{{ show.poster_path }}" 
                   alt="{{ show.title }} Poster" width="150">
            </a>
          </td>
          <td class="details-cell">
            <h3 class="title">{{ show.title }}</h3>
            
            <div class="info-row">
              <table class="info-table" width="100%" cellpadding="0" cellspacing="0" border="0"><tr><td class="info-label-cell" width="110" style="width: 110px; vertical-align: top; padding-right: 10px;"><span class="info-label genres">üé≠ Genres:</span></td><td class="info-content-cell" style="vertical-align: top;"><span class="info-content">{{ show.genres | join(', ') | default('N/A') }}</span></td></tr></table>
            </div>
            
            <div class="info-row">
              <table class="info-table" width="100%" cellpadding="0" cellspacing="0" border="0"><tr><td class="info-label-cell" width="110" style="width: 110px; vertical-align: top; padding-right: 10px;"><span class="info-label overview">üìù Plot:</span></td><td class="info-content-cell" style="vertical-align: top;"><span class="info-content overview-text">{{ show.overview }}</span></td></tr></table>
            </div>
            
            <div class="info-row">
              <table class="info-table" width="100%" cellpadding="0" cellspacing="0" border="0"><tr><td class="info-label-cell" width="110" style="width: 110px; vertical-align: top; padding-right: 10px;"><span class="info-label cast">üë• Cast:</span></td><td class="info-content-cell" style="vertical-align: top;"><span class="info-content">{{ show.cast | join(', ') | default('N/A') }}</span></td></tr></table>
            </div>
            
            <div class="info-row">
              <table class="info-table" width="100%" cellpadding="0" cellspacing="0" border="0"><tr><td class="info-label-cell" width="110" style="width: 110px; vertical-align: top; padding-right: 10px;"><span class="info-label creator">üé® Creators:</span></td><td class="info-content-cell" style="vertical-align: top;"><span class="info-content">{{ show.creators | join(', ') | default('N/A') }}</span></td></tr></table>
            </div>
            
            <div class="info-row">
              <table class="info-table" width="100%" cellpadding="0" cellspacing="0" border="0">
                <tr>
                  <td class="info-label-cell" width="110" style="width: 110px; vertical-align: top; padding-right: 10px;">
                    <span class="info-label scores">‚≠ê Ratings:</span>
                  </td>
                  <td class="info-content-cell" style="vertical-align: top;">
                    <div class="scores-container" style="margin-top: 5px;">
                      {% if show.metacritic_score %}
                      <span class="score-badge metacritic" title="Metacritic Score: Aggregated score from professional critics." style="margin-right: 10px; margin-bottom: 5px;">‚ìÇÔ∏è {{ show.metacritic_score }}</span>
                      {% endif %}
                      {% if show.rotten_tomatoes_scores.critic_score %}
                      <span class="score-badge rt-critic" title="Rotten Tomatoes Tomatometer: Percentage of positive critic reviews." style="margin-right: 10px; margin-bottom: 5px;">üçÖ {{ show.rotten_tomatoes_scores.critic_score }}%</span>
                      {% endif %}
                      {% if show.rotten_tomatoes_scores.audience_score %}
                      <span class="score-badge rt-audience" title="Rotten Tomatoes Audience Score: Percentage of positive user ratings." style="margin-right: 10px; margin-bottom: 5px;">üçø {{ show.rotten_tomatoes_scores.audience_score }}%</span>
                      {% endif %}
                    </div>
                  </td>
                </tr>
              </table>
            </div>
            
            <div class="info-row">
              <table class="info-table" width="100%" cellpadding="0" cellspacing="0" border="0">
                <tr>
                  <td class="info-label-cell" width="110" style="width: 110px; vertical-align: top; padding-right: 10px;">
                    <span class="info-label release">üìÖ Premiered:</span>
                  </td>
                  <td class="info-content-cell" style="vertical-align: top;">
                    <span class="release-date">{{ show.release_date }}</span>
                  </td>
                </tr>
              </table>
            </div>
          </td>
        </tr>
      </table>
      {% endfor %}
    </div>
    
    <!-- Footer -->
    <div class="footer">
      <p>üìß Thanks for reading! üé¨</p>
    </div>

</body>
</html>